{"ast":null,"code":"import _objectSpread from\"C:/Users/Farhan/Desktop/WebDevelopment/Projects/Learnify/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Farhan/Desktop/WebDevelopment/Projects/Learnify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useDropzone}from\"react-dropzone\";import{FiUploadCloud}from\"react-icons/fi\";import{useSelector}from\"react-redux\";import\"video-react/dist/video-react.css\";import{Player}from\"video-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Upload(_ref){var name=_ref.name,label=_ref.label,register=_ref.register,setValue=_ref.setValue,errors=_ref.errors,_ref$video=_ref.video,video=_ref$video===void 0?false:_ref$video,_ref$viewData=_ref.viewData,viewData=_ref$viewData===void 0?null:_ref$viewData,_ref$editData=_ref.editData,editData=_ref$editData===void 0?null:_ref$editData;var _useSelector=useSelector(function(state){return state.course;}),course=_useSelector.course;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(viewData?viewData:editData?editData:\"\"),_useState4=_slicedToArray(_useState3,2),previewSource=_useState4[0],setPreviewSource=_useState4[1];var inputRef=useRef(null);var onDrop=function onDrop(acceptedFiles){var file=acceptedFiles[0];if(file){previewFile(file);setSelectedFile(file);}};var _useDropzone=useDropzone({accept:!video?{\"image/*\":[\".jpeg\",\".jpg\",\".png\"]}:{\"video/*\":[\".mp4\"]},onDrop:onDrop}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive;var previewFile=function previewFile(file){// console.log(file)\nvar reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=function(){setPreviewSource(reader.result);};};useEffect(function(){register(name,{required:true});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[register]);useEffect(function(){setValue(name,selectedFile);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[selectedFile,setValue]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-richblack-5\",htmlFor:name,children:[label,\" \",!viewData&&/*#__PURE__*/_jsx(\"sup\",{className:\"text-pink-200\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isDragActive?\"bg-richblack-600\":\"bg-richblack-700\",\" flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500\"),children:previewSource?/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col p-6\",children:[!video?/*#__PURE__*/_jsx(\"img\",{src:previewSource,alt:\"Preview\",className:\"h-full w-full rounded-md object-cover\"}):/*#__PURE__*/_jsx(Player,{aspectRatio:\"16:9\",playsInline:true,src:previewSource}),!viewData&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){setPreviewSource(\"\");setSelectedFile(null);setValue(name,null);},className:\"mt-3 text-richblack-400 underline\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"flex w-full flex-col items-center p-6\"},getRootProps()),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},getInputProps()),{},{ref:inputRef})),/*#__PURE__*/_jsx(\"div\",{className:\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\",children:/*#__PURE__*/_jsx(FiUploadCloud,{className:\"text-2xl text-yellow-50\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\",children:[\"Drag and drop an \",!video?\"image\":\"video\",\", or click to\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-yellow-50\",children:\"Browse\"}),\" a file\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Aspect ratio 16:9\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Recommended size 1024x576\"})]})]}))}),errors[name]&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs tracking-wide text-pink-200\",children:[label,\" is required\"]})]});}","map":{"version":3,"names":["useEffect","useRef","useState","useDropzone","FiUploadCloud","useSelector","Player","jsx","_jsx","jsxs","_jsxs","Upload","_ref","name","label","register","setValue","errors","_ref$video","video","_ref$viewData","viewData","_ref$editData","editData","_useSelector","state","course","_useState","_useState2","_slicedToArray","selectedFile","setSelectedFile","_useState3","_useState4","previewSource","setPreviewSource","inputRef","onDrop","acceptedFiles","file","previewFile","_useDropzone","accept","getRootProps","getInputProps","isDragActive","reader","FileReader","readAsDataURL","onloadend","result","required","className","children","htmlFor","concat","src","alt","aspectRatio","playsInline","type","onClick","_objectSpread","ref"],"sources":["C:/Users/Farhan/Desktop/WebDevelopment/Projects/Learnify/src/components/core/Dashboard/AddCourse/Upload.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\nimport { useDropzone } from \"react-dropzone\"\nimport { FiUploadCloud } from \"react-icons/fi\"\nimport { useSelector } from \"react-redux\"\n\nimport \"video-react/dist/video-react.css\"\nimport { Player } from \"video-react\"\n\nexport default function Upload({\n  name,\n  label,\n  register,\n  setValue,\n  errors,\n  video = false,\n  viewData = null,\n  editData = null,\n}) {\n  const { course } = useSelector((state) => state.course)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const [previewSource, setPreviewSource] = useState(\n    viewData ? viewData : editData ? editData : \"\"\n  )\n  const inputRef = useRef(null)\n\n  const onDrop = (acceptedFiles) => {\n    const file = acceptedFiles[0]\n    if (file) {\n      previewFile(file)\n      setSelectedFile(file)\n    }\n  }\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    accept: !video\n      ? { \"image/*\": [\".jpeg\", \".jpg\", \".png\"] }\n      : { \"video/*\": [\".mp4\"] },\n    onDrop,\n  })\n\n  const previewFile = (file) => {\n    // console.log(file)\n    const reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onloadend = () => {\n      setPreviewSource(reader.result)\n    }\n  }\n\n  useEffect(() => {\n    register(name, { required: true })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [register])\n\n  useEffect(() => {\n    setValue(name, selectedFile)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedFile, setValue])\n\n  return (\n    <div className=\"flex flex-col space-y-2\">\n      <label className=\"text-sm text-richblack-5\" htmlFor={name}>\n        {label} {!viewData && <sup className=\"text-pink-200\">*</sup>}\n      </label>\n      <div\n        className={`${\n          isDragActive ? \"bg-richblack-600\" : \"bg-richblack-700\"\n        } flex min-h-[250px] cursor-pointer items-center justify-center rounded-md border-2 border-dotted border-richblack-500`}\n      >\n        {previewSource ? (\n          <div className=\"flex w-full flex-col p-6\">\n            {!video ? (\n              <img\n                src={previewSource}\n                alt=\"Preview\"\n                className=\"h-full w-full rounded-md object-cover\"\n              />\n            ) : (\n              <Player aspectRatio=\"16:9\" playsInline src={previewSource} />\n            )}\n            {!viewData && (\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setPreviewSource(\"\")\n                  setSelectedFile(null)\n                  setValue(name, null)\n                }}\n                className=\"mt-3 text-richblack-400 underline\"\n              >\n                Cancel\n              </button>\n            )}\n          </div>\n        ) : (\n          <div\n            className=\"flex w-full flex-col items-center p-6\"\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} ref={inputRef} />\n            <div className=\"grid aspect-square w-14 place-items-center rounded-full bg-pure-greys-800\">\n              <FiUploadCloud className=\"text-2xl text-yellow-50\" />\n            </div>\n            <p className=\"mt-2 max-w-[200px] text-center text-sm text-richblack-200\">\n              Drag and drop an {!video ? \"image\" : \"video\"}, or click to{\" \"}\n              <span className=\"font-semibold text-yellow-50\">Browse</span> a\n              file\n            </p>\n            <ul className=\"mt-10 flex list-disc justify-between space-x-12 text-center  text-xs text-richblack-200\">\n              <li>Aspect ratio 16:9</li>\n              <li>Recommended size 1024x576</li>\n            </ul>\n          </div>\n        )}\n      </div>\n      {errors[name] && (\n        <span className=\"ml-2 text-xs tracking-wide text-pink-200\">\n          {label} is required\n        </span>\n      )}\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}